#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build alsa-lib
$SCRIPTS/build dbus
$SCRIPTS/build glib
$SCRIPTS/build gettext

cd $PKG_BUILD

if [ $DEBUG = yes ]; then
  DEBUG_CONFIG="--enable-debug"
else
  DEBUG_CONFIG="--disable-debug"
fi
if [ $DEVTOOLS = yes ]; then
  DEVTOOLS_CONFIG="--enable-bccmd --enable-test --enable-tools"
else
  DEVTOOLS_CONFIG="--disable-bccmd --disable-test --disable-tools"
fi 

./configure --host=$TARGET_NAME \
            --build=$HOST_NAME \
            --prefix=/usr \
            --sysconfdir=/etc \
            --libexecdir=/usr/lib \
            --localstatedir=/var \
            --disable-dependency-tracking \
            --enable-shared \
            --disable-static \
            --disable-network \
            --disable-serial \
            --disable-input \
            --disable-audio \
            --disable-service \
            --disable-gstreamer \
            --enable-alsa \
            --disable-usb \
            --disable-netlink \
            --disable-hidd \
            --disable-pand \
            --disable-dund \
            $DEBUG_CONFIG \
            $DEVTOOLS_CONFIG
make
